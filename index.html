<!DOCTYPE html>
<html>
  <head>
    <title>gmail sender</title>
    <link rel="stylesheet" href="css/main.css" charset="utf-8">
  </head>
  <body>
    <header>
      <span class='brand'>Gmail Sender</span>
      <ul class='nav' role='nav'>
        <li><a href="http://localhost:3000/auth/google_oauth2/new?redirect_to=http://localhost:8080">Sign In</a>
        <li><a href="http://localhost:3000/sign-out?redirect_to=http://localhost:8080" class='new-window'>Sign Out</a>
        <li><a href="#new-schedule" class="new-schedule">+ Schedule</a></li>
      </ul>
    </header>

    <div class='main' role="main">

    </div>
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/mustache/mustache.js"></script>
    <script src="js/schedule.js"></script>
    <script src="js/email.js"></script>
    <script src="js/main.js"></script>

    <!-- endbower -->
    <script id="view-welcome" type="x-tmpl-mustache">
      <h2>Scheduled</h2>

      <div class='alert errors-schedule'>
        <ul>
        </ul>
      </div>
      <form class='create-email'>
        <label>
          To:
          <input name="email[to]" type='email' />
        </label>
        <label>
          Subject:
          <input name="email[subject]" type='text' />
        </label>
        <label>
          Send at:
          <input name="email[send_first_at]" type='text' />
        </label>
        <label>
          Repeat:
          <select name="email[every_n_minutes]">
            <option value="{{#daysToMinutes}}1{{/daysToMinutes}}">Daily</option>
            <option value="{{#daysToMinutes}}2{{/daysToMinutes}}">2 Days</option>
            <option value="{{#daysToMinutes}}3{{/daysToMinutes}}">3 Days</option>
            <option value="{{#daysToMinutes}}4{{/daysToMinutes}}">4 Days</option>
            <option value="{{#daysToMinutes}}5{{/daysToMinutes}}">5 Days</option>
            <option value="{{#daysToMinutes}}6{{/daysToMinutes}}">6 Days</option>
            <option value="{{#daysToMinutes}}7{{/daysToMinutes}}">Weekly</option>
            <option value="{{#daysToMinutes}}30{{/daysToMinutes}}">Monthly</option>
            <option value="{{#daysToMinutes}}365{{/daysToMinutes}}">Yearly</option>
          </select>
        </label>
        <label>
          <input name="email[times]" type='number' />
          times
        </label>
        <button>Submit</button>
      </form>
      <div class='emails-container'>
      </div>
      <div class='email-container'>
      </div>
    </script>

    <script id="view-schedules" type="x-tmpl-mustache">
      <ul class='emails'>
        {{#schedules}}
          <li data-id={{id}} class='email'>
            {{ email.to }}
            {{ email.subject }}
            <a href='#email-delete' class='delete'>x</a>
          </li>
        {{/schedules}}
      </ul>
    </script>

    <script id="view-emails" type="x-tmpl-mustache">
      {{#emails}}
        <div class='email-master' data-id="{{id}}">
          <h2>{{subject}}</h2>
          <h3>{{to}}</h3>
        </div>
      {{/emails}}
    </script>

    <script id="view-email" type="x-tmpl-mustache">
      <div class='email' data-id="{{email.id}}">
        {{email.id}}
        {{#schedules}}
          <div class='schedule'>
            {{id}}
          </div>
        {{/schedules}}
        <a href="#" class="refresh-schedules" data-id="{{email.id}}">Refresh</a>
      </div>
    </script>

  </body>
</html>
